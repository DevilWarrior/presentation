<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Presentation | NUKE</title>

		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/icomoon.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">

			<div id="bottom-left"><a href="https://twitter.com/nukebuildnet">Matthias Koch</a></div>

			<div class="slides">

				<section>
					<h2>Privet!</h2>
				</section>

				<section>

					<section>
						<h2>About me</h2>

						<aside class="notes">
							<ul>
								<li>Work: JetBrains / ReSharper</li>
								<li>Interests: Music, CleanCode, Testing, Tooling</li>
								<li>OpenSource: TestLinker, TestFx</li>
							</ul>
						</aside>
					</section>

					<section><img data-src="images/testfx01.png" alt="TestFx Example" /></section>
					<section><img data-src="images/testfx02.png" alt="TestFx Runner" /></section>
					<section><img data-src="images/testfx03.png" alt="TestFx Commit History" /></section>

				</section>

				<section>
					<img class="logo" style="width:700px" data-src="images/logo.png" alt="Logo">
					<h5 class="subtitle">Build Automation with C# DSL and full IDE support</h5>

					<aside class="notes">
						<ul>
							<li>Build automation is the process of automating the creation of a software build and the associated processes including</li>
							<li>Idea of reproducible builds; eliminate chance of human error</li>
							<li>Lower risk by having the build encapsulated from the CI server: FAKE, Cake, Rake</li>
							<li>Run build from everywhere</li>
						</ul>
					</aside>
				</section>

				<section>

					<section>
						<pre><code class="csharp" data-trim contenteditable style="font-size: 24px; line-height: 28px;max-height: 100%">
&nbsp;



    Target Clean =&gt; _ =&gt; _
            .Executes(() =&gt; /* actions */));




&nbsp;
						</code></pre>

						<aside class="notes">
							<ul>
								<li>Targets as expression-bodied properties returning a delegate type</li>
								<li>Targets are actual symbols, not strings</li>
								<li>Doesn't look much different compared to some other scripting approaches</li>
								<li>Lessons learnt: chance of adoption is decreased when blocking existing tooling</li>
							</ul>
						</aside>
					</section>

					<section>
						<pre><code class="csharp" data-trim contenteditable style="font-size: 24px; line-height: 28px;max-height: 100%">
class Build : NukeBuild
{
    public static int Main () =&gt; Execute&lt;Build&gt;(x =&gt; x.Compile);

    Target Clean =&gt; _ =&gt; _
            .Executes(() =&gt; /* actions */));

    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt; /* actions */));
}
						</code></pre>

						<aside class="notes">
							<ul>
								<li>Simple class with base class NukeBuild</li>
								<li>Main -&gt; Console application</li>
								<li>Declares default target and returns exit code</li>
								<li>No typos for target references</li>
							</ul>
						</aside>
					</section>

				</section>

				<section>

					<section><h2>A simple C# Project</h2></section>

					<section>
						<img data-src="images/completion.png" alt="Auto-completion" />
						<aside class="notes">
							<ul>
								<li>Syntax highlighting</li>
								<li>No need to look up documentation on website</li>
								<li>But also links to official website</li>
							</ul>
						</aside>
					</section>
					<section>
						<img data-src="images/navigation.png" alt="Navigation" />
						<aside class="notes">
							<ul>
								<li>Properties not only allow superior referencing</li>
								<li>They are symbols -&gt; we can actually navigate to them</li>
							</ul>
						</aside>
					</section>
					<section>
						<img data-src="images/debugging.png" alt="Debugging" />
						<aside class="notes">
							<ul>
								<li>Everyone can debug a console application</li>
							</ul>
						</aside>
					</section>

					<section id="environments">
						<img class="logo" data-src="images/visualstudio.png" alt="VisualStudio" />
						<img class="logo" data-src="images/rider.png" alt="VisualStudio" />
						<img class="logo" data-src="images/omnisharp.png" alt="VisualStudio" />
					</section>

					<section>
						<ul>
							<li class="fragment">No scripting experience</li>
							<li class="fragment">No preprocessing</li>
							<li class="fragment">No extensions</li>
							<li class="fragment">No how-to's</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>As a project: less time spent on rebuilding infrastructure</li>
								<li>No further knowledge necessary compared to any other framework</li>
								<li>Code in C# - Build in C#</li>
								<li>Cultural change in teams: everyone is able to manage the build</li>
							</ul>
						</aside>
					</section>

				</section>

				<section>
					<img data-src="images/build.jpg" alt="Writing a Build System" />

					<aside class="notes">
						<ul>
							<li>"I can write this in a day or two!"</li>
							<li>What really matters is ...</li>
						</ul>
					</aside>
				</section>

				<section>

					<section>
						<h2>Tool support</h2>

						<aside class="notes">
							<ul>
								<li>FAKE and Cake have years of advantage and lots of contributors</li>
							</ul>
						</aside>
					</section>

					<section>
						<img data-src="images/msbuild_reference.png" style="height:80%;width:80%" />

						<aside class="notes">
							<ul>
								<li>Boolean values</li>
								<li>List values with separator</li>
								<li>Dictionaries with separators between key and value and pairs itself</li>
							</ul>
						</aside>
					</section>

					<section>
						<pre><code class="json" data-trim contenteditable style="font-size: 17px; line-height: 20px;max-height: 100%">
{
  "name": "NoLogo",
  "type": "bool",
  "format": "/nologo",
  "help": "Don't display the startup banner or the copyright message."
},
{
  "name": "Targets",
  "type": "List&lt;string&gt;",
  "format": "/target:{value}",
  "separator": ";",
  "help": "&lt;p&gt;Build the specified targets in the project. Specify each target ..."
},
{
  "name": "Properties",
  "type": "Dictionary&lt;string, object&gt;",
  "format": "/property:{value}",
  "itemFormat": "{key}={value}",
  "disallowedCharacter": ";",
  "help": "&lt;p&gt;Set or override the specified project-level properties, where name ...",
  "delegates": [ ... ]
}
						</code></pre>
					</section>

					<section data-background="images/generation02.gif">
						<h3>Code-Generation</h3>

						<aside class="notes">
							<ul>
								<li>MSBuild has around 1700 lines of code</li>
								<li>Not everything is generated, but the vast majority</li>
								<li>For MSBuild the executable locator is a custom implementation</li>
							</ul>
						</aside>
					</section>

          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {




            });



}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild();



            });

    // Output:
    //   msbuild.exe
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile);



            });

    // Output:
    //   msbuild.exe Solution.sln
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetNoLogo(noLogo: true));


            });

    // Output:
    //   msbuild.exe Solution.sln /nologo
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetNoLogo(noLogo: true)
                    .DisableNoLogo());

            });

    // Output:
    //   msbuild.exe Solution.sln
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetNoLogo(noLogo: true)
                    .DisableNoLogo()
                    .ToggleNoLogo());
            });

    // Output:
    //   msbuild.exe Solution.sln /nologo
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .AddTargets("Restore", "Compile"));


            });

    // Output:
    //   msbuild.exe Solution.sln /t:Restore;Compile
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .AddTargets("Restore", "Compile")
                    .RemoveTargets("Restore"));

            });

    // Output:
    //   msbuild.exe Solution.sln /t:Compile
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .AddTargets("Restore", "Compile")
                    .RemoveTargets("Restore")
                    .SetTargets("Rebuild"));
            });

    // Output:
    //   msbuild.exe Solution.sln /t:Rebuild
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetProperty("configuration", "release"));


            });

    // Output:
    //   msbuild.exe Solution.sln /p:configuration=release
}
            </code></pre>
          </section>
					<section>
						<pre><code class="json" data-trim contenteditable style="font-size: 17px; line-height: 20px;max-height: 100%">
{
  "name": "Properties",
  "type": "Dictionary&lt;string, object&gt;",
  "format": "/property:{value}",
  "itemFormat": "{key}={value}",
  "disallowedCharacter": ";",
  "help": "&lt;p&gt;Set or override the specified project-level properties, where name ...",
  "delegates": [ ... ]
}
						</code></pre>
					</section>
					<section>
						<pre><code class="json" data-trim contenteditable style="font-size: 17px; line-height: 20px;max-height: 100%">
{
  "name": "Properties",
  "type": "Dictionary&lt;string, object&gt;",
  "format": "/property:{value}",
  "itemFormat": "{key}={value}",
  "disallowedCharacter": ";",
  "help": "&lt;p&gt;Set or override the specified project-level properties, where name ...",
  "delegates": [
    {
      "name": "Configuration",
      "type": "string"
    },
    {
      "name": "RunCodeAnalysis",
      "type": "bool"
    },
    {
      "name": "NoWarn",
      "type": "List&lt;int&gt;",
      "separator": ";"
    }
  ]
}
						</code></pre>
					</section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetProperty("configuration", "release")
                    .SetConfiguration("debug"));

            });

    // Output:
    //   msbuild.exe Solution.sln /p:configuration=debug
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .EnableRunCodeAnalysis());


            });

    // Output:
    //   msbuild.exe Solution.sln /p:RunCodeAnalysis=true
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetNoWarns(1000, 1002));

                    
            });

    // Output:
    //   msbuild.exe Solution.sln /p:NoWarn="1000;1002"
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetNoWarns(1000, 1002)
                    .RemoveNoWarns(1002));

            });

    // Output:
    //   msbuild.exe Solution.sln /p:NoWarn=1000
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetVerbosity(MSBuildVerbosity.Diagnostics));


            });

    // Output:
    //   msbuild.exe Solution.sln /v:diag
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(SolutionFile, x => x
                    .SetTargetPlatform(MSBuildTargetPlatform.MSIL));


            });

    // Output:
    //   msbuild.exe Solution.sln /p:platform:"Any CPU"
}
            </code></pre>
          </section>
          <section>
            <pre><code class="csharp" data-trim contenteditable style="font-size: 22px; line-height: 26px;max-height: 100%">
using static Nuke.Common.Tools.MSBuildTasks;

class Build : NukeBuild
{
    Target Compile =&gt; _ =&gt; _
            .DependsOn(Clean)
            .Executes(() =&gt;
            {
                MSBuild(ProjectFile, x => x
                    .SetTargetPlatform(MSBuildTargetPlatform.MSIL));


            });

    // Output:
    //   msbuild.exe Project.csproj /p:platform:AnyCPU
}
            </code></pre>
          </section>


					<section>
						<ul>
							<li class="fragment">Fast, safe, efficient</li>
							<li class="fragment">Compatible for new features</li>
							<li class="fragment">Changes are detected automatically</li>
							<li class="fragment">Share with other build systems?</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Quoting, Typos, Bugs, No tests required</li>
							</ul>
						</aside>
					</section>

				</section>

				<section>

					<section><h2>Project Goals</h2></section>

					<section>
						<table class="table center-table">
				      <tr>
				      	<td class="fragment"><span class="icon icon-shrink2"></span><p>Unification</p></td>
				      	<td class="fragment"><span class="icon icon-share4"></span><p>Sharing</p></td>
				      	<td class="fragment"><span class="icon icon-lab"></span><p>Research</p></td>
				      </tr>
				    </table>

						<aside class="notes">
							<ul>
								<li>Consistent API + make addins only for technical reasons</li>
								<li>Share metadata with other languages/ecosystems and tools</li>
								<li>Research: parse from debug sessions</li>
								<li>Research: write analyzers/inspections</li>
							</ul>
						</aside>
					</section>

				</section>

				<section>

					<section data-background="images/bryan.gif" data-autoslide="3000"></section>
					<section data-background="images/bryan.png">
						<ul class="references">
							<li><span class="icon icon-sphere2"></span>nuke.build</li>
							<li><span class="icon icon-github"></span>github.com/nuke-build/nuke</li>
							<li><span class="icon icon-twitter"></span>@nukebuildnet</li>
							<li><span class="icon icon-bubble"></span>gitter.im/nuke-build/nuke</li>
							<li><span class="icon icon-presentation"></span>present.nuke.build</li>
						</ul>
					</section>

				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				slideNumber: true,
				transition: 'fade',
				showNotes: true,
				history: true,
				controls: false,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'socket.io/socket.io.js', async: true },
					{ src: 'plugin/notes-server/client.js', async: true }
				]
			});
		</script>
	</body>
</html>
